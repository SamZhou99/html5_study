var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function a(t){try{c(r.next(t))}catch(e){o(e)}}function s(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(a,s)}c((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(r){i=[6,r],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},DrawCircle=function(t){function e(){var e=t.call(this)||this;return e.radius=60,e.coordinate=new egret.Point(200,200),e.lineColor=[65280,16776960,16711680],e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemove,e),e}return __extends(e,t),e.prototype.onAdd=function(){this.totalTime=15,this.angleTime=1,this.angleTime=360/this.totalTime/100,this.circleLine=new egret.Shape,this.addChild(this.circleLine),this.circleDot=new egret.Shape,this.addChild(this.circleDot);var t=2*this.radius;this.timeTxt=new egret.TextField,this.timeTxt.size=60,this.timeTxt.width=this.timeTxt.height=t,this.timeTxt.textAlign=egret.HorizontalAlign.CENTER,this.timeTxt.verticalAlign=egret.VerticalAlign.MIDDLE,this.timeTxt.x=this.coordinate.x-.5*t,this.timeTxt.y=this.coordinate.y-.5*t,this.addChild(this.timeTxt);var e=3394815,i=1,r=10,n=10,o=4,a=3,s=!1,c=!1,l=new egret.GlowFilter(e,i,r,n,o,a,s,c);this.filters=[l],this.startTime()},e.prototype.onRemove=function(){},e.prototype.startTime=function(){var t=this,e=0;this.stopTime(),this.temp=setInterval(function(){t.drawArcLine(e),t.moveCircleDot(e),t.setTxt(String(1+t.totalTime-Math.ceil(e/360*t.totalTime))),e+=t.angleTime,e>=360&&(e=0)},10)},e.prototype.stopTime=function(){clearInterval(this.temp)},e.prototype.drawArcLine=function(t){this.circleLine.graphics.clear(),this.circleLine.graphics.lineStyle(6,this.getColor(t)),this.circleLine.graphics.drawArc(this.coordinate.x,this.coordinate.y,this.radius,0,Math.PI/180*t,!0)},e.prototype.drawCircleDot=function(t){this.circleDot.graphics.clear(),this.circleDot.graphics.beginFill(this.getColor(t)),this.circleDot.graphics.drawCircle(this.coordinate.x,this.coordinate.y,8),this.circleDot.graphics.endFill()},e.prototype.moveCircleDot=function(t){this.drawCircleDot(t);var e=2*Math.PI/360*t;this.circleDot.x=this.radius*Math.cos(e),this.circleDot.y=this.radius*Math.sin(e)},e.prototype.setTxt=function(t){this.timeTxt&&(this.timeTxt.text=t)},e.prototype.getColor=function(t){return 120>t?this.lineColor[0]:240>t?this.lineColor[1]:this.lineColor[2]},e}(egret.Sprite);__reflect(DrawCircle.prototype,"DrawCircle");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){var t=new DrawCircle;this.addChild(t)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);