<!DOCTYPE html>
<html>

<head>
    <title>pixijs</title>
    <link rel="stylesheet" type="text/css" href="./css/main.css" />
    <script type="text/javascript" src="./js/pixi.min.js"></script>
    <script type="text/javascript" src="./js/my.js"></script>
</head>

<body>
</body>

</html>









<script type="text/javascript">

var sw = window.innerWidth;
var sh = window.innerHeight;
console.log(sw, sh);

var app = new PIXI.Application(sw, sh, {
	backgroundColor : 0x1099bb,
	antialias: true,
	transparent: false
});
app.renderer.autoResize = true;
app.renderer.resize(sw, sh);
document.body.appendChild(app.view);

var stage = new PIXI.Container();
app.stage.addChild(stage);
var bg = new PIXI.Graphics();
bg.beginFill(0x00FF00, 0);
bg.drawRect(0, 0, sw, sh);
bg.endFill();
bg.interactive = true;
bg.buttonMode = true;
bg.on('mousedown', onMouseDown);
stage.addChild(bg);

var tp = {x:0, y:0};
var mp = {x:0, y:0};
var g = new PIXI.Graphics();
g.lineStyle(4, 0x996633, 1);
stage.addChild(g);


function onMouseDown(e) {
	// let mg = app.renderer.plugins.interaction.mouse.global;
	let mg = e.data.global;
	tp = new PIXI.Point(mg.x, mg.y);

	bg.on('mousemove', onMouseMove);
    bg.on('mouseup', onMouseUp);
}
function onMouseMove(e) {
	let mg = e.data.global;
	mp = new PIXI.Point(mg.x, mg.y);

	if (distance(tp, mp) <= 5)
		return;

	g.moveTo(tp.x, tp.y);
	g.lineTo(mp.x, mp.y);

	tp = new PIXI.Point(mg.x, mg.y);

}
function onMouseUp(e) {
	bg.off('mousemove', onMouseMove);
    bg.off('mouseup', onMouseUp);
}

function distance(p1, p2) {
	// let xdiff = p2.x-p1.x;
	// let ydiff = p2.y-p1.y;
	// return Math.pow((xdiff * xdiff + ydiff * ydiff), 0.5);
	return Math.sqrt((p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y)); 
}


</script>